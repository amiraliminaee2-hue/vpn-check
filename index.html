<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>بررسی اتصال</title>

<style>
body {
    font-family: Tahoma, sans-serif;
    direction: rtl;
    text-align: center;
    background-color: #f5f5f5;
    margin-top: 80px;
}

.box {
    background: #fff;
    padding: 25px;
    max-width: 420px;
    margin: auto;
    border-radius: 8px;
    border: 1px solid #ddd;
}

button {
    margin-top: 15px;
    padding: 10px 20px;
    cursor: pointer;
}
</style>
</head>
<body>

<div id="content" class="box">
    در حال بررسی اتصال...
</div>

<script>
const MAIN_URL = "https://example.com"; // لینک سایت اصلی

fetch("https://ipwho.is/")
.then(res => res.json())
.then(data => {

    // فقط VPNهای خیلی واضح
    const isStrongVPN =
        data.success === false ||
        (data.proxy === true && data.hosting === true);

    if (isStrongVPN) {
        document.getElementById("content").innerHTML = `
            ⚠️ <strong>احتمالاً فیلترشکن شما روشن است</strong>
            <br><br>
            لطفاً در صورت امکان فیلترشکن را خاموش کنید.
            <br><br>
            <button onclick="location.reload()">بررسی مجدد</button>
            <br>
            <button onclick="location.href='${MAIN_URL}'">
                ادامه با همین اتصال
            </button>
        `;
    } else {
        // کاربر سالم → مستقیم وارد شود
        window.location.href = MAIN_URL;
    }

})
.catch(() => {
    // اگر API هم جواب نداد، سخت نگیر
    window.location.href = MAIN_URL;
});
</script>

</body>
</html>
