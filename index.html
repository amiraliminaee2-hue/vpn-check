<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>بررسی اتصال</title>

<style>
body {
    font-family: Tahoma, sans-serif;
    direction: rtl;
    text-align: center;
    background-color: #f5f5f5;
    margin-top: 80px;
}

#vpnWarning {
    display: none;
    background: #fff;
    padding: 25px;
    max-width: 420px;
    margin: auto;
    border-radius: 8px;
    border: 1px solid #ff4d4d;
}
</style>
</head>
<body>

<div id="vpnWarning">
    ⚠️ <strong>لطفاً برای ورود فیلترشکن خود را خاموش کنید</strong>
    <br><br>
    سپس صفحه را رفرش نمایید.
</div>

<script>
fetch("https://ipwho.is/")
.then(res => res.json())
.then(data => {

    /*
      منطق:
      اگر IP دیتاسنتری یا پروکسی بود → VPN
      در غیر این صورت → اجازه ورود
    */

    if (
        data.success === false ||
        data.proxy === true ||
        data.hosting === true
    ) {
        // VPN روشن
        document.getElementById("vpnWarning").style.display = "block";
    } else {
        // VPN خاموش
        window.location.href = "https://example.com";
    }

})
.catch(() => {
    document.getElementById("vpnWarning").innerText =
        "خطا در بررسی اتصال. لطفاً صفحه را رفرش کنید.";
    document.getElementById("vpnWarning").style.display = "block";
});
</script>

</body>
</html>
